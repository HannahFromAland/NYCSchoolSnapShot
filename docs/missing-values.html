<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Missing values | NYC School Snapshot</title>
  <meta name="description" content="Chapter 4 Missing values | NYC School Snapshot" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Missing values | NYC School Snapshot" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Missing values | NYC School Snapshot" />
  
  
  

<meta name="author" content="Pinyi Yang &amp; Yuan Heng" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-transformation.html"/>
<link rel="next" href="results.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/parallel-coordinates-2.1.8/parcoords.css" rel="stylesheet" />
<script src="libs/parcoords-binding-1.0.0/parcoords.js"></script>
<script src="libs/d3-5.16.0/d3.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYCSchoolSnapshot</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>2.1</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-sources.html"><a href="data-sources.html#data-column-summary-example"><i class="fa fa-check"></i><b>2.1.1</b> Data Column Summary Example</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-sources.html"><a href="data-sources.html#enrollment-average-across-2013-2018-distribution"><i class="fa fa-check"></i><b>2.1.2</b> Enrollment (average across 2013-2018) Distribution</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-sources.html"><a href="data-sources.html#yearly-observation-count"><i class="fa fa-check"></i><b>2.1.3</b> Yearly Observation Count</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-sources.html"><a href="data-sources.html#number-of-observations-per-school"><i class="fa fa-check"></i><b>2.1.4</b> Number of Observations per School</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#project-goal"><i class="fa fa-check"></i><b>2.2</b> Project goal</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#issue-with-raw-data"><i class="fa fa-check"></i><b>2.3</b> Issue with raw data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#removing-incomplete-schools"><i class="fa fa-check"></i><b>3.1</b> Removing Incomplete Schools</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#adding-features"><i class="fa fa-check"></i><b>3.2</b> Adding features</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-transformation.html"><a href="data-transformation.html#location-of-school"><i class="fa fa-check"></i><b>3.2.1</b> Location of School</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-transformation.html"><a href="data-transformation.html#type-of-school"><i class="fa fa-check"></i><b>3.2.2</b> Type of School</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#checking-missing-values"><i class="fa fa-check"></i><b>4.1</b> Checking Missing Values</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#checking-inconsistent-values"><i class="fa fa-check"></i><b>4.2</b> Checking Inconsistent Values</a></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#missing-pattern-plot"><i class="fa fa-check"></i><b>4.3</b> Missing Pattern plot</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#deep-dive-of-school-type"><i class="fa fa-check"></i><b>5.1</b> Deep Dive of School Type</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#combination-of-school-type"><i class="fa fa-check"></i><b>5.1.1</b> Combination of School Type</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#special-school-for-students-with-disability"><i class="fa fa-check"></i><b>5.1.2</b> Special School for Students with Disability</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#analysis-of-school-enrollment"><i class="fa fa-check"></i><b>5.2</b> Analysis of school enrollment</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#school-diversity-in-nyc"><i class="fa fa-check"></i><b>5.3</b> School Diversity in NYC</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#race-and-ethnicity"><i class="fa fa-check"></i><b>5.3.1</b> Race and Ethnicity</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#school-type-and-ethnicity-composition"><i class="fa fa-check"></i><b>5.3.2</b> School Type and Ethnicity Composition</a></li>
<li class="chapter" data-level="5.3.3" data-path="results.html"><a href="results.html#poverty-level"><i class="fa fa-check"></i><b>5.3.3</b> Poverty Level</a></li>
<li class="chapter" data-level="5.3.4" data-path="results.html"><a href="results.html#english-language-learner"><i class="fa fa-check"></i><b>5.3.4</b> English Language Learner</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#correlation-hypothesis-and-analysis"><i class="fa fa-check"></i><b>5.4</b> Correlation Hypothesis and Analysis</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="results.html"><a href="results.html#poverty-rate-and-school-population"><i class="fa fa-check"></i><b>5.4.1</b> Poverty Rate and School Population</a></li>
<li class="chapter" data-level="5.4.2" data-path="results.html"><a href="results.html#three-way-interaction-race-composition-total-enrollment-poverty"><i class="fa fa-check"></i><b>5.4.2</b> Three-way Interaction: Race Composition, Total Enrollment, Poverty</a></li>
<li class="chapter" data-level="5.4.3" data-path="results.html"><a href="results.html#gender-composition-and-poverty"><i class="fa fa-check"></i><b>5.4.3</b> Gender Composition and Poverty</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NYC School Snapshot</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="missing-values" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Missing values</h1>
<div id="checking-missing-values" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Checking Missing Values</h2>
<pre><code>## [1] &quot;After looping over all numerical variables, there&#39;s 0 NA values&quot;</code></pre>
<p>The data consist of different data types of parameters: numeric and character. For numerical variables, such as number of Asian student, number of Hispanic student, etc. a value of 0 is acceptable, since there might not be any student that belongs to that specific ethnic group, so we checked if there are any <code>NA</code> values in all variables that are numeric. It turned out that the data is pretty complete since there are no NA values for all numeric type variable.</p>
</div>
<div id="checking-inconsistent-values" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Checking Inconsistent Values</h2>
<p>For character type variables, such as the <code>Economic.Need.Index</code> that represents numerical values in character format, we checked for missing values by converting the column of values to numeric after removing the <code>%</code> sign after the number. If there is no missing values, we should expect all values being converted to numbers. However, the conversion led to NA values for all observations, which indicate existence of values that are not NA but does not conform to the labeling format (i.e. string with number of percentages).</p>
<p>Thus, to check for inconsistent values, we first mutate the <code>Economic.Need.Index</code> column by converting values that does not follow the format of <code>"numerical value %"</code> into NA.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="missing-values.html#cb3-1" aria-hidden="true" tabindex="-1"></a>inconsistent <span class="ot">&lt;-</span> school <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="missing-values.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Economic.Need.Index.new =</span> </span>
<span id="cb3-3"><a href="missing-values.html#cb3-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(Economic.Need.Index, <span class="st">&quot;^[</span><span class="sc">\\</span><span class="st">d]+%&quot;</span>), <span class="cn">NA</span>, </span>
<span id="cb3-4"><a href="missing-values.html#cb3-4" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(Economic.Need.Index, <span class="st">&quot;^[</span><span class="sc">\\</span><span class="st">d]+&quot;</span>)))) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="missing-values.html#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(DBN, X..Female<span class="fl">.1</span>, X..Male<span class="fl">.1</span>, X..Asian<span class="fl">.1</span>, X..Black<span class="fl">.1</span>, X..Hispanic<span class="fl">.1</span>,</span>
<span id="cb3-6"><a href="missing-values.html#cb3-6" aria-hidden="true" tabindex="-1"></a>            X..Multiple.Race.Categories.Not.Represented<span class="fl">.1</span>, X..White<span class="fl">.1</span>,</span>
<span id="cb3-7"><a href="missing-values.html#cb3-7" aria-hidden="true" tabindex="-1"></a>            X..Students.with.Disabilities<span class="fl">.1</span>, X..English.Language.Learners<span class="fl">.1</span>,</span>
<span id="cb3-8"><a href="missing-values.html#cb3-8" aria-hidden="true" tabindex="-1"></a>            X..Poverty<span class="fl">.1</span>, is_preschool, is_elementary, is_middle, is_high)) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="missing-values.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="missing-values.html#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Female =</span> X..Female, <span class="at">Male =</span> X..Male, <span class="at">Asian =</span> X..Asian, <span class="at">Black =</span> X..Black,</span>
<span id="cb3-11"><a href="missing-values.html#cb3-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">Hispanic =</span> X..Hispanic, <span class="at">Others =</span> X..Multiple.Race.Categories.Not.Represented,</span>
<span id="cb3-12"><a href="missing-values.html#cb3-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">White =</span> X..White, <span class="at">Disabled.Students =</span> X..Students.with.Disabilities,</span>
<span id="cb3-13"><a href="missing-values.html#cb3-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">English.Learners =</span> X..English.Language.Learners, <span class="at">Poverty =</span> X..Poverty)</span>
<span id="cb3-14"><a href="missing-values.html#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="missing-values.html#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste0</span>(<span class="st">&quot;The number of NAs, which was originally represented as No Data is &quot;</span>,</span>
<span id="cb3-16"><a href="missing-values.html#cb3-16" aria-hidden="true" tabindex="-1"></a>             <span class="fu">sum</span>(<span class="fu">is.na</span>(inconsistent<span class="sc">$</span>Economic.Need.Index.new)), </span>
<span id="cb3-17"><a href="missing-values.html#cb3-17" aria-hidden="true" tabindex="-1"></a>             <span class="st">&quot; among the total of &quot;</span>, </span>
<span id="cb3-18"><a href="missing-values.html#cb3-18" aria-hidden="true" tabindex="-1"></a>             <span class="fu">length</span>(inconsistent<span class="sc">$</span>Economic.Need.Index.new), <span class="st">&quot; observations&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;The number of NAs, which was originally represented as No Data is 1718 among the total of 8590 observations&quot;</code></pre>
<p>As indicated in the R output, there are 1718 missing values in the <code>Economic.Need.Index</code> alone.</p>
</div>
<div id="missing-pattern-plot" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Missing Pattern plot</h2>
<p>Given the shear size of the dataset, it is hard to visualize missing value pattern of the whole dataset, thus, we can sample from the whole data set and visualize the missing pattern:
<img src="finalproj_files/figure-html/ch4-6-1.png" width="672" /><img src="finalproj_files/figure-html/ch4-6-2.png" width="672" /><img src="finalproj_files/figure-html/ch4-6-3.png" width="672" /></p>
<p>After trying few cases of missing pattern combinations, it is really rare to find a case that have a pattern. This is because that the data itself has a really large size, which is 8972 rows by 39 columns, while there’s only 1730 missing entries, with a missing value rate less than 0.5%. From the missing pattern plots, we can see that all the numerical columns except for <code>Economic.Need.Index</code> are complete. The missing values in <code>Economic.Need.Index</code> is not worrisome to us because <code>Poverty</code> parameter describes the same thing as <code>Economic.Need.Index</code>. So, we decided to completely remove the <code>Economic.Need.Index</code> column during further analysis, and use the complete <code>Poverty</code> column to represent economic statuses of the students.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-transformation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/HannahFromAland/NYCSchoolSnapShot/edit/main/04-missing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/HannahFromAland/NYCSchoolSnapShot/blob/main/04-missing.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
